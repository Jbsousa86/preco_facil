<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mercado Local</title>
    <link rel="stylesheet" href="assets/style.css" />
    <!-- Leaflet CSS (sem integrity para evitar erro de mismatch) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
    <link rel="manifest" href="manifest.json" />
    <style>
        /* Estilos para o agrupamento por loja */
        .store-block {
            background: linear-gradient(135deg, hsl(220, 90%, 92%), #ffffff);
            border: 1px solid hsl(220, 90%, 85%);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
        }

        .store-header {
            margin: 0 0 1rem 0;
            color: #2563eb;
            /* Cor de destaque */
            font-size: 1.2rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }

        .product-result-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .product-result-item:last-child {
            border-bottom: none;
        }

        .product-price {
            color: #4CAF50;
            font-weight: bold;
        }

        /* Responsividade para Mobile */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            #search-form {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            #search-form input,
            #search-form button {
                width: 100%;
                box-sizing: border-box;
            }

            .results-list {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            /* CORRE√á√ÉO: Garante que as Ofertas em Destaque fiquem em linha (Roll/Carousel) */
            #offers-container {
                flex-direction: row !important;
                overflow-x: auto !important;
                justify-content: flex-start;
            }

            /* CORRE√á√ÉO: Ajusta os cards da busca para caberem na tela (Responsividade) */
            #results .result-card {
                display: flex;
                flex-direction: row;
                width: 100%;
                box-sizing: border-box;
                overflow: hidden;
                /* Impede que o card estoure a largura */
            }

            #results .store-info {
                flex: 1;
                /* Ocupa o espa√ßo restante */
                min-width: 0;
                /* CR√çTICO: Permite que o texto seja cortado (ellipsis) */
                padding-right: 5px;
            }

            /* Garante que textos longos n√£o quebrem o layout */
            #results .store-info h3,
            #results .store-info p,
            #results .store-info span {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="header-content">
            <img src="assets/logo.png" alt="Mercado Local Logo" class="logo" />
            <div style="display: flex; flex-direction: column; align-items: center;">
                <h1>Mercado Local</h1>
                <button id="install-btn" class="install-button">üì≤ Instalar App</button>
            </div>
        </div>
    </header>
    <main>
        <section class="merchant-section" id="merchant-block">
            <h3>√â um comerciante?</h3>
            <p>Cadastre sua loja e exiba seus produtos para milhares de clientes.</p>
            <a href="login.html" class="button">Acessar √°rea do comerciante</a>
        </section>
        <section id="offers-section" style="display: none; margin-bottom: 1.5rem;">
            <h3 style="color: #1f2937; margin-top: 0; border-bottom: 1px solid #e5e7eb; padding-bottom: 0.5rem;">üî•
                Ofertas em Destaque</h3>
            <div id="offers-container" class="results-list"></div>
        </section>
        <section class="search-section">
            <form id="search-form">
                <label for="product">Buscar Produto:</label>
                <input type="text" id="product" name="product" required placeholder="ex.: A√ß√∫car, Arroz, Caf√©..." />
                <button type="submit">Comparar Pre√ßos</button>
            </form>
            <div id="trending-container" style="margin-top: 1rem; display: none;">
                <p style="font-size: 0.85rem; color: #aaa; margin-bottom: 0.5rem;">Mais procurados:</p>
                <div id="trending-tags" style="display: flex; gap: 0.5rem; flex-wrap: wrap;"></div>
            </div>
        </section>
        <section id="results" class="results-section">
            <!-- Results will be injected here -->
            <div class="empty-state">
                Digite um produto acima para ver os melhores pre√ßos perto de voc√™.
            </div>
        </section>
    </main>

    <!-- Bot√£o Flutuante de Suporte -->
    <a href="https://wa.me/5563992225774" target="_blank" class="floating-support-btn" title="Falar com Suporte">üéß</a>

    <script src="assets/app.js"></script>
</body>

</html>